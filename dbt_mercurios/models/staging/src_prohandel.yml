version: 2

sources:
  - name: prohandel
    database: MERCURIOS_DATA
    schema: RAW
    tables:
      - name: article
        description: "Article data from ProHandel API"
        columns:
          - name: article_id
            description: "Unique identifier for the article"
            tests:
              - unique
              - not_null
          - name: article_number
            description: "Article number/SKU"
            tests:
              - not_null
          - name: description
            description: "Article description"
          - name: _fivetran_synced
            description: "Timestamp of when Fivetran last synced the record"
            
      - name: inventory
        description: "Inventory data from ProHandel API"
        columns:
          - name: inventory_id
            description: "Unique identifier for the inventory record"
            tests:
              - unique
              - not_null
          - name: article_id
            description: "Foreign key to article"
            tests:
              - not_null
              - relationships:
                  to: source('prohandel', 'article')
                  field: article_id
          - name: warehouse_id
            description: "Identifier for the warehouse"
            tests:
              - not_null
          - name: quantity
            description: "Current stock quantity"
            tests:
              - not_null
          - name: _fivetran_synced
            description: "Timestamp of when Fivetran last synced the record"
            
      - name: sale
        description: "Sales data from ProHandel API"
        columns:
          - name: sale_id
            description: "Unique identifier for the sale"
            tests:
              - unique
              - not_null
          - name: order_id
            description: "Foreign key to order"
            tests:
              - not_null
          - name: article_id
            description: "Foreign key to article"
            tests:
              - not_null
              - relationships:
                  to: source('prohandel', 'article')
                  field: article_id
          - name: quantity
            description: "Quantity sold"
            tests:
              - not_null
          - name: price
            description: "Sale price"
            tests:
              - not_null
          - name: sale_date
            description: "Date of the sale"
            tests:
              - not_null
          - name: _fivetran_synced
            description: "Timestamp of when Fivetran last synced the record"
