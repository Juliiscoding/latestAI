version: 2

models:
  - name: fct_inventory_metrics
    description: "Fact table for inventory metrics with sales velocity and reorder recommendations"
    columns:
      - name: article_id
        description: "Unique identifier for the article"
      - name: tenant_id
        description: "Identifier for the tenant"
      - name: warehouse_id
        description: "Identifier for the warehouse"
      - name: stock_quantity
        description: "Current stock quantity"
      - name: stock_status
        description: "Status of the stock (Out of Stock, Low Stock, Medium Stock, Well Stocked)"
      - name: days_of_supply
        description: "Number of days the current inventory will last based on sales rate"
      - name: recommended_reorder_point
        description: "Quantity at which a reorder should be triggered"
      - name: recommended_order_quantity
        description: "Recommended quantity to order"
      - name: needs_reorder
        description: "Boolean indicating if a reorder is needed"
      - name: supply_status
        description: "Status of supply (Critical, Low, Medium, Good, Excess)"

  - name: fct_inventory_forecast
    description: "Predictive model for inventory forecasting and optimization"
    columns:
      - name: article_id
        description: "Unique identifier for the article"
      - name: tenant_id
        description: "Identifier for the tenant"
      - name: forecasted_30_day_demand
        description: "Predicted demand for the next 30 days"
      - name: forecasted_60_day_demand
        description: "Predicted demand for the next 60 days"
      - name: forecasted_90_day_demand
        description: "Predicted demand for the next 90 days"
      - name: inventory_coverage
        description: "How many days the current inventory will last"
      - name: stockout_risk
        description: "Risk of running out of stock (High, Medium, Low, Very Low)"
      - name: excess_inventory_risk
        description: "Risk of having excess inventory (High, Medium, Low, Optimal)"
      - name: optimal_order_quantity
        description: "Optimal quantity to order based on demand forecast"
      - name: optimal_reorder_date
        description: "Optimal date to place the next order"

  - name: dim_products
    description: "Dimension table for products with detailed attributes"
    columns:
      - name: article_id
        description: "Unique identifier for the article"
      - name: tenant_id
        description: "Identifier for the tenant"
      - name: article_name
        description: "Name of the article"
      - name: category
        description: "Product category"
      - name: price_tier
        description: "Price tier (Budget, Standard, Premium, Luxury)"
      - name: product_age_days
        description: "Age of the product in days"
      - name: product_age_category
        description: "Product age category (New, Recent, Established)"

  - name: fct_sales_metrics
    description: "Fact table for sales metrics and trends"
    columns:
      - name: article_id
        description: "Unique identifier for the article"
      - name: tenant_id
        description: "Identifier for the tenant"
      - name: total_quantity_sold
        description: "Total quantity sold"
      - name: total_revenue
        description: "Total revenue generated"
      - name: total_profit
        description: "Total profit generated"
      - name: daily_sales_rate
        description: "Average daily sales rate"
      - name: sales_velocity_category
        description: "Sales velocity category (Very Slow, Slow, Medium, Fast, Very Fast)"
      - name: days_since_last_sale
        description: "Days since the last sale"
      - name: sales_activity_status
        description: "Sales activity status (Active, Slowing, Inactive)"
      - name: profitability_category
        description: "Profitability category (Unprofitable, Low Margin, Medium Margin, High Margin)"

  - name: fct_customer_metrics
    description: "Fact table for customer metrics and segmentation"
    columns:
      - name: customer_id
        description: "Unique identifier for the customer"
      - name: tenant_id
        description: "Identifier for the tenant"
      - name: number_of_orders
        description: "Number of orders placed by the customer"
      - name: total_spent
        description: "Total amount spent by the customer"
      - name: average_order_value
        description: "Average order value"
      - name: days_since_last_order
        description: "Days since the customer's last order"
      - name: recency_segment
        description: "Customer segment based on recency (Active, Recent, Lapsed, Inactive)"
      - name: frequency_segment
        description: "Customer segment based on frequency (One-time, Occasional, Regular, Loyal)"
      - name: monetary_segment
        description: "Customer segment based on monetary value (Low, Medium, High, VIP)"
      - name: rfm_segment
        description: "Combined RFM segment (Champions, Loyal Customers, Promising, At Risk, etc.)"
